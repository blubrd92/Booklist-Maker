<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Booklist Maker</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <link rel="stylesheet" href="assets/css/styles.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Bebas+Neue&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="notification-area"></div>

  <nav class="app-header">
    <div class="logo">
      <i class="fa-solid fa-book-open"></i> Booklist Maker
    </div>
    
    <div class="header-actions">
      <button id="load-list-button" class="btn btn-header" title="Load Saved List">
        <i class="fa-solid fa-upload"></i> Load
      </button>
      <button id="save-list-button" class="btn btn-header" title="Save Current List">
        <i class="fa-solid fa-download"></i> Save
      </button>
      <button id="reset-blank-button" class="btn btn-header" title="Reset to Blank">
        <i class="fa-solid fa-rotate-right"></i> Reset
      </button>
      <button id="export-pdf-button" class="btn btn-header-primary" title="Generate PDF">
        <i class="fa-solid fa-file-pdf"></i> Generate PDF
      </button>
      <input type="file" id="load-list-input" accept=".booklist,.json,application/json" style="display: none;" />
    </div>
  </nav>

  <div class="app-container">
    
    <aside class="sidebar">
      
      <div class="sidebar-tabs">
        <button class="tab-btn active" onclick="openTab(event, 'tab-search')">
          <i class="fa-solid fa-magnifying-glass"></i> Search
        </button>
        <button class="tab-btn" onclick="openTab(event, 'tab-settings')">
          <i class="fa-solid fa-sliders"></i> Settings
        </button>
      </div>

      <div id="tab-search" class="tab-content active">
        <div class="sidebar-card">
          <div class="card-body">
            <form id="search-form" class="search-form">
              <div class="form-group">
                <input id="keywordInput" type="text" placeholder="Keyword..."/>
              </div>
              <div class="advanced-search-toggle">
                <details>
                  <summary>Advanced Fields</summary>
                  <div class="advanced-fields-grid">
                    <input id="titleInput" type="text" placeholder="Title"/>
                    <input id="authorInput" type="text" placeholder="Author"/>
                    <input id="subjectInput" type="text" placeholder="Subject"/>
                    <input id="isbnInput" type="text" placeholder="ISBN"/>
                    <input id="publisherInput" type="text" placeholder="Publisher"/>
                    <input id="personInput" type="text" placeholder="Contributor"/>
                  </div>
                </details>
              </div>
              <button id="fetchButton" type="submit" class="btn btn-primary btn-block">Search</button>
            </form>
          </div>
        </div>
        <div id="results-container" class="results-scroll-area"></div>
      </div>

      <div id="tab-settings" class="tab-content export-controls">
        
        <div class="form-group" data-style-group="title">
          <label>Book Title</label>
          <div class="control-row">
            <select class="font-select">
              <option value="'Georgia', serif">Georgia</option>
              <option value="'Calibri', sans-serif">Calibri</option>
              <option value="'Arvo', serif">Arvo</option>
              <option value="'Lato', sans-serif">Lato</option>
              <option value="'Roboto', sans-serif">Roboto</option>
              <option value="'Merriweather', serif">Merriweather</option>
              <option value="'EB Garamond', serif">EB Garamond</option>
              <option value="'Helvetica', sans-serif">Helvetica</option>
              <option value="'Times New Roman', serif">Times New Roman</option>
              <option value="'Bangers', system-ui">Bangers</option>
              <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
              <option value="'Cinzel', serif">Cinzel</option>
            </select>
            <input class="font-size-input" type="number" min="8" value="14"/>
          </div>
          <div class="control-row">
            <button class="bold-toggle btn-icon">B</button>
            <button class="italic-toggle btn-icon">I</button>
            <input class="color-picker" type="color" value="#000000"/>
          </div>
        </div>

        <div class="form-group" data-style-group="author">
          <label>Author / Call #</label>
          <div class="control-row">
            <select class="font-select">
              <option value="'Calibri', sans-serif">Calibri</option>
              <option value="'Georgia', serif">Georgia</option>
              <option value="'Arvo', serif">Arvo</option>
              <option value="'Lato', sans-serif">Lato</option>
              <option value="'Roboto', sans-serif">Roboto</option>
              <option value="'Merriweather', serif">Merriweather</option>
              <option value="'EB Garamond', serif">EB Garamond</option>
              <option value="'Helvetica', sans-serif">Helvetica</option>
              <option value="'Times New Roman', serif">Times New Roman</option>
              <option value="'Bangers', system-ui">Bangers</option>
              <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
              <option value="'Cinzel', serif">Cinzel</option>
            </select>
            <input class="font-size-input" type="number" min="8" value="12"/>
          </div>
          <div class="control-row">
            <button class="bold-toggle active btn-icon">B</button>
            <button class="italic-toggle btn-icon">I</button>
            <input class="color-picker" type="color" value="#000000"/>
          </div>
        </div>

        <div class="form-group" data-style-group="desc">
          <label>Description</label>
          <div class="control-row">
            <select class="font-select">
              <option value="'Calibri', sans-serif">Calibri</option>
              <option value="'Georgia', serif">Georgia</option>
              <option value="'Arvo', serif">Arvo</option>
              <option value="'Lato', sans-serif">Lato</option>
              <option value="'Roboto', sans-serif">Roboto</option>
              <option value="'Merriweather', serif">Merriweather</option>
              <option value="'EB Garamond', serif">EB Garamond</option>
              <option value="'Helvetica', sans-serif">Helvetica</option>
              <option value="'Times New Roman', serif">Times New Roman</option>
            </select>
            <input class="font-size-input" type="number" min="8" value="10"/>
          </div>
          <div class="control-row">
            <button class="bold-toggle btn-icon">B</button>
            <button class="italic-toggle btn-icon">I</button>
            <input class="color-picker" type="color" value="#000000"/>
          </div>
        </div>

        <div class="control-row checkbox-row">
          <input id="stretch-block-covers-toggle" type="checkbox"/>
          <label for="stretch-block-covers-toggle">Stretch Book Covers</label>
        </div>

        <hr class="separator">

        <div class="form-group" id="cover-title-style-group">
          <label>Cover Header Style</label>
          <div class="control-row">
            <select class="font-select">
              <option value="'Oswald', sans-serif">Oswald</option>
              <option value="'Arvo', serif">Arvo</option>
              <option value="'Anton', sans-serif">Anton</option>
              <option value="'Lato', sans-serif">Lato</option>
              <option value="'Roboto', sans-serif">Roboto</option>
              <option value="'Georgia', serif">Georgia</option>
              <option value="Merriweather">Merriweather</option>
              <option value="'EB Garamond', serif">EB Garamond</option>
              <option value="'Helvetica', sans-serif">Helvetica</option>
              <option value="'Bangers', system-ui">Bangers</option>
              <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
              <option value="'Cinzel', serif">Cinzel</option>
            </select>
            <input class="font-size-input" type="number" min="8" value="40"/>
          </div>
          <div class="control-row">
            <button class="bold-toggle active btn-icon">B</button>
            <button class="italic-toggle btn-icon">I</button>
            <input class="color-picker" type="color" value="#FFFFFF"/>
            <div class="mini-label">BG:</div>
            <input id="cover-title-bg-color" class="color-picker" type="color" value="#000000"/>
          </div>
          
          <details class="advanced-settings">
            <summary>Margins & Padding</summary>
            <div class="grid-2">
              <label>Outer Margin</label>
              <input id="cover-title-outer-margin" class="font-size-input" type="number" value="10"/>
              <label>Side Margin</label>
              <input id="cover-title-side-margin" class="font-size-input" type="number" value="0"/>
              <label>BG Pad X</label>
              <input id="cover-title-pad-x" class="font-size-input" type="number" value="0"/>
              <label>BG Pad Y</label>
              <input id="cover-title-pad-y" class="font-size-input" type="number" value="10"/>
            </div>
          </details>

          <div class="control-row checkbox-row">
            <input id="stretch-covers-toggle" type="checkbox" checked/>
            <label for="stretch-covers-toggle">Stretch Header Covers</label>
          </div>
        </div>

        <div class="form-group">
          <label>Back Cover Elements</label>
          <div class="control-row checkbox-row">
            <input id="toggle-qr-code" type="checkbox" checked/>
            <label for="toggle-qr-code">Show QR Code</label>
          </div>
          <div class="control-row checkbox-row">
            <input id="toggle-branding" type="checkbox" checked/>
            <label for="toggle-branding">Show Branding</label>
          </div>
        </div>

        <div class="form-group" id="qr-code-controls">
          <label>QR Code URL</label>
          <div class="control-row">
              <input id="qr-url-input" type="text" placeholder="https://..."/>
              <button id="generate-qr-button" class="btn btn-sm btn-primary">Update</button>
          </div>
          
          <div class="form-group" data-style-group="qr" style="margin-top:15px;">
              <label>QR Text Style</label>
              <div class="control-row">
                  <select class="font-select">
                  <option value="'Calibri', sans-serif">Calibri</option>
                  <option value="'Georgia', serif">Georgia</option>
                  <option value="'Arvo', serif">Arvo</option>
                  <option value="'Lato', sans-serif">Lato</option>
                  <option value="'Roboto', sans-serif">Roboto</option>
                  <option value="'Merriweather', serif">Merriweather</option>
                  <option value="'EB Garamond', serif">EB Garamond</option>
                  <option value="'Helvetica', sans-serif">Helvetica</option>
                  <option value="'Times New Roman', serif">Times New Roman</option>
                  </select>
                  <input class="font-size-input" type="number" min="8" value="13"/>
              </div>
              <div class="control-row">
                  <button class="bold-toggle active btn-icon">B</button>
                  <button class="italic-toggle btn-icon">I</button>
                  <input class="color-picker" type="color" value="#000000"/>
              </div>
          </div>
        </div>

      </div>
    </aside>

    <main class="main-content">
      <div class="toolbar">
        <h2>Preview</h2>
        <div class="toolbar-hint">
            <i class="fa-solid fa-circle-info"></i> Edit text directly on the page.
        </div>
      </div>

      <div id="preview-area">
        <div class="page" id="print-page-1">
          <div class="panel" id="back-cover-panel">
            <div class="qr-code-container" id="qr-code-area">
              <div id="qr-code-text" class="editable-field" contenteditable="true">Enter your blurb here. To link to an online list (like Bibliocommons), go to the Settings tab and paste the URL in the 'QR Code URL' field and click update. Remember to test the code with your phone!</div>
              <div id="qr-code-canvas">
                <img alt="QR Code Placeholder" src="https://placehold.co/144x144/EAEAEA/333333?text=QR+Code"/>
              </div>
            </div>
            <label class="custom-uploader" id="branding-uploader">
              <img alt="Library Branding Placeholder" src="assets/img/branding-default.png"/>
              <input type="file" accept="image/*"/>
            </label>
          </div>

          <div class="panel" id="front-cover-panel">
            <div class="custom-uploader" id="front-cover-uploader">
              <img alt="Cover Image Placeholder" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/>
              <div class="placeholder-text">
                Upload a Custom Cover<br/>For the best results, its dimensions should be 5x8 inches<br/><br/>OR<br/><br/>Use the Auto-Generate Cover tool below<br/>(This will use the first 12 covers from your list to create a collage)
              </div>
              <div id="cover-generate-controls">
                <textarea id="cover-title-input" rows="3" placeholder="Enter Cover Title..."></textarea>
                <button id="generate-cover-button" class="btn btn-primary">Auto-Generate Cover</button>
              </div>
              <input type="file" accept="image/*"/>
            </div>
          </div>
          <div class="page-divider"></div>
        </div>

        <div class="page" id="print-page-2">
          <div class="panel book-panel" id="inside-left-panel"></div>
          <div class="panel book-panel" id="inside-right-panel"></div>
          <div class="page-divider"></div>
        </div>
      </div>
    </main>
  </div>

  <script>
    function openTab(evt, tabName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tab-content");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].classList.remove("active");
      }
      tablinks = document.getElementsByClassName("tab-btn");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].classList.remove("active");
      }
      document.getElementById(tabName).classList.add("active");
      evt.currentTarget.classList.add("active");
    }
  </script>

  <script src="assets/js/app.js"></script>

  <div class="font-preloader">
    <span style="font-family: 'Oswald', sans-serif; font-weight: 400;">.</span>
    <span style="font-family: 'Oswald', sans-serif; font-weight: 700;">.</span>
    <span style="font-family: 'Anton', sans-serif; font-weight: 400;">.</span>
    <span style="font-family: 'EB Garamond', serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'EB Garamond', serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'EB Garamond', serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'EB Garamond', serif; font-weight: 700; font-style: italic;">.</span>
    <span style="font-family: 'Lato', sans-serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Lato', sans-serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Lato', sans-serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Lato', sans-serif; font-weight: 700; font-style: italic;">.</span>
    <span style="font-family: 'Merriweather', serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Merriweather', serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Merriweather', serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Merriweather', serif; font-weight: 700; font-style: italic;">.</span>
    <span style="font-family: 'Roboto', sans-serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Roboto', sans-serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Roboto', sans-serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Roboto', sans-serif; font-weight: 700; font-style: italic;">.</span>
    <span style="font-family: 'Arvo', serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Arvo', serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Arvo', serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Arvo', serif; font-weight: 700; font-style: italic;">.</span>
    <span style="font-family: 'Bangers', system-ui; font-weight: 400;">.</span>
    <span style="font-family: 'Bebas Neue', sans-serif; font-weight: 400;">.</span>
    <span style="font-family: 'Cinzel', serif; font-weight: 400;">.</span>
    <span style="font-family: 'Cinzel', serif; font-weight: 700;">.</span>
  </div>
  
</body>
</html>



