<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Booklist Maker</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <link rel="stylesheet" href="assets/css/styles.css"/>
  <!-- Google Fonts: All application fonts loaded via CDN -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Arvo:ital,wght@0,400;0,700;1,400;1,700&family=Bangers&family=Bebas+Neue&family=Bungee&family=Cinzel:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,700;1,400;1,700&family=EB+Garamond:ital,wght@0,400;0,700;1,400;1,700&family=Lato:ital,wght@0,400;0,700;1,400;1,700&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&family=Montserrat:ital,wght@0,400;0,700;1,400;1,700&family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Oswald:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Poppins:ital,wght@0,400;0,700;1,400;1,700&family=Raleway:ital,wght@0,400;0,700;1,400;1,700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&family=Roboto+Slab:wght@400;700&family=Source+Sans+3:ital,wght@0,400;0,700;1,400;1,700&family=Staatliches&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Accessibility: Skip to main content link -->
  <a href="#preview-area" class="skip-link">Skip to preview</a>
  
  <div id="notification-area" role="alert" aria-live="polite"></div>

  <nav class="app-header" role="banner">
    <div class="logo">
      <i class="fa-solid fa-book-open" aria-hidden="true"></i> Booklist Maker
    </div>
    
    <div class="header-actions">
      <button id="load-list-button" class="btn btn-header" title="Load Saved List" aria-label="Load saved booklist file">
        <i class="fa-solid fa-upload" aria-hidden="true"></i> Load
      </button>
      <button id="save-list-button" class="btn btn-header" title="Save Current List" aria-label="Save current booklist to file">
        <i class="fa-solid fa-download" aria-hidden="true"></i> Save
      </button>
      <button id="reset-blank-button" class="btn btn-header" title="Reset to Blank" aria-label="Reset to blank booklist">
        <i class="fa-solid fa-rotate-right" aria-hidden="true"></i> Reset
      </button>
      <button id="export-pdf-button" class="btn btn-header-primary" title="Generate PDF" aria-label="Generate PDF of booklist">
        <i class="fa-solid fa-file-pdf" aria-hidden="true"></i> Generate PDF
      </button>
      <input type="file" id="load-list-input" accept=".booklist,.json,application/json" style="display: none;" aria-hidden="true" />
    </div>
  </nav>

  <div class="app-container">
    
    <aside class="sidebar" role="complementary" aria-label="Search and Settings">
      
      <div class="sidebar-tabs" role="tablist">
        <button class="tab-btn active" onclick="openTab(event, 'tab-search')" role="tab" aria-selected="true" aria-controls="tab-search">
          <i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i> Search
        </button>
        <button class="tab-btn" onclick="openTab(event, 'tab-settings')" role="tab" aria-selected="false" aria-controls="tab-settings">
          <i class="fa-solid fa-sliders" aria-hidden="true"></i> Settings
        </button>
      </div>

      <div id="tab-search" class="tab-content active" role="tabpanel" aria-labelledby="search-tab">
        <div class="sidebar-card">
          <div class="card-body">
            <form id="search-form" class="search-form" role="search">
              <div class="form-group">
                <label for="keywordInput" class="sr-only">Search keywords</label>
                <input id="keywordInput" type="text" placeholder="Keyword..."/>
              </div>
              <div class="advanced-search-toggle">
                <details>
                  <summary>Advanced Fields</summary>
                  <div class="advanced-fields-grid">
                    <label for="titleInput" class="sr-only">Title</label>
                    <input id="titleInput" type="text" placeholder="Title"/>
                    <label for="authorInput" class="sr-only">Author</label>
                    <input id="authorInput" type="text" placeholder="Author"/>
                    <label for="subjectInput" class="sr-only">Subject</label>
                    <input id="subjectInput" type="text" placeholder="Subject"/>
                    <label for="isbnInput" class="sr-only">ISBN</label>
                    <input id="isbnInput" type="text" placeholder="ISBN"/>
                    <label for="publisherInput" class="sr-only">Publisher</label>
                    <input id="publisherInput" type="text" placeholder="Publisher"/>
                    <label for="personInput" class="sr-only">Contributor</label>
                    <input id="personInput" type="text" placeholder="Contributor"/>
                  </div>
                </details>
              </div>
              <button id="fetchButton" type="submit" class="btn btn-primary btn-block">Search</button>
            </form>
          </div>
        </div>
        <div id="results-container" class="results-scroll-area" role="region" aria-label="Search results" aria-live="polite"></div>
      </div>

      <div id="tab-settings" class="tab-content export-controls" role="tabpanel" aria-labelledby="settings-tab">
        
        <div class="form-group" data-style-group="title">
          <label>Book Title</label>
          <div class="control-row">
            <select class="font-select" aria-label="Title font family">
              <option value="'Anton', sans-serif">Anton</option>
              <option value="'Arvo', serif">Arvo</option>
              <option value="'Bangers', system-ui">Bangers</option>
              <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
              <option value="'Bungee', system-ui">Bungee</option>
              <option value="'Calibri', sans-serif">Calibri</option>
              <option value="'Cinzel', serif">Cinzel</option>
              <option value="'Crimson Text', serif">Crimson Text</option>
              <option value="'EB Garamond', serif">EB Garamond</option>
              <option value="'Georgia', serif" selected>Georgia</option>
              <option value="'Helvetica', sans-serif">Helvetica</option>
              <option value="'Lato', sans-serif">Lato</option>
              <option value="'Libre Baskerville', serif">Libre Baskerville</option>
              <option value="'Merriweather', serif">Merriweather</option>
              <option value="'Montserrat', sans-serif">Montserrat</option>
              <option value="'Open Sans', sans-serif">Open Sans</option>
              <option value="'Oswald', sans-serif">Oswald</option>
              <option value="'Playfair Display', serif">Playfair Display</option>
              <option value="'Poppins', sans-serif">Poppins</option>
              <option value="'Raleway', sans-serif">Raleway</option>
              <option value="'Roboto', sans-serif">Roboto</option>
              <option value="'Roboto Slab', serif">Roboto Slab</option>
              <option value="'Source Sans 3', sans-serif">Source Sans 3</option>
              <option value="'Staatliches', system-ui">Staatliches</option>
              <option value="'Times New Roman', serif">Times New Roman</option>
            </select>
            <input class="font-size-input" type="number" min="8" value="14" aria-label="Title font size"/>
          </div>
          <div class="control-row">
            <button class="bold-toggle btn-icon" aria-label="Toggle bold" aria-pressed="false">B</button>
            <button class="italic-toggle btn-icon" aria-label="Toggle italic" aria-pressed="false">I</button>
            <input class="color-picker" type="color" value="#000000" aria-label="Title color"/>
          </div>
        </div>

        <div class="form-group" data-style-group="author">
          <label>Author / Call #</label>
          <div class="control-row">
            <select class="font-select" aria-label="Author font family">
              <option value="'Anton', sans-serif">Anton</option>
              <option value="'Arvo', serif">Arvo</option>
              <option value="'Bangers', system-ui">Bangers</option>
              <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
              <option value="'Bungee', system-ui">Bungee</option>
              <option value="'Calibri', sans-serif" selected>Calibri</option>
              <option value="'Cinzel', serif">Cinzel</option>
              <option value="'Crimson Text', serif">Crimson Text</option>
              <option value="'EB Garamond', serif">EB Garamond</option>
              <option value="'Georgia', serif">Georgia</option>
              <option value="'Helvetica', sans-serif">Helvetica</option>
              <option value="'Lato', sans-serif">Lato</option>
              <option value="'Libre Baskerville', serif">Libre Baskerville</option>
              <option value="'Merriweather', serif">Merriweather</option>
              <option value="'Montserrat', sans-serif">Montserrat</option>
              <option value="'Open Sans', sans-serif">Open Sans</option>
              <option value="'Oswald', sans-serif">Oswald</option>
              <option value="'Playfair Display', serif">Playfair Display</option>
              <option value="'Poppins', sans-serif">Poppins</option>
              <option value="'Raleway', sans-serif">Raleway</option>
              <option value="'Roboto', sans-serif">Roboto</option>
              <option value="'Roboto Slab', serif">Roboto Slab</option>
              <option value="'Source Sans 3', sans-serif">Source Sans 3</option>
              <option value="'Staatliches', system-ui">Staatliches</option>
              <option value="'Times New Roman', serif">Times New Roman</option>
            </select>
            <input class="font-size-input" type="number" min="8" value="12" aria-label="Author font size"/>
          </div>
          <div class="control-row">
            <button class="bold-toggle active btn-icon" aria-label="Toggle bold" aria-pressed="true">B</button>
            <button class="italic-toggle btn-icon" aria-label="Toggle italic" aria-pressed="false">I</button>
            <input class="color-picker" type="color" value="#000000" aria-label="Author color"/>
          </div>
        </div>

        <div class="form-group" data-style-group="desc">
          <label>Description</label>
          <div class="control-row">
            <select class="font-select" aria-label="Description font family">
              <option value="'Anton', sans-serif">Anton</option>
              <option value="'Arvo', serif">Arvo</option>
              <option value="'Bangers', system-ui">Bangers</option>
              <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
              <option value="'Bungee', system-ui">Bungee</option>
              <option value="'Calibri', sans-serif" selected>Calibri</option>
              <option value="'Cinzel', serif">Cinzel</option>
              <option value="'Crimson Text', serif">Crimson Text</option>
              <option value="'EB Garamond', serif">EB Garamond</option>
              <option value="'Georgia', serif">Georgia</option>
              <option value="'Helvetica', sans-serif">Helvetica</option>
              <option value="'Lato', sans-serif">Lato</option>
              <option value="'Libre Baskerville', serif">Libre Baskerville</option>
              <option value="'Merriweather', serif">Merriweather</option>
              <option value="'Montserrat', sans-serif">Montserrat</option>
              <option value="'Open Sans', sans-serif">Open Sans</option>
              <option value="'Oswald', sans-serif">Oswald</option>
              <option value="'Playfair Display', serif">Playfair Display</option>
              <option value="'Poppins', sans-serif">Poppins</option>
              <option value="'Raleway', sans-serif">Raleway</option>
              <option value="'Roboto', sans-serif">Roboto</option>
              <option value="'Roboto Slab', serif">Roboto Slab</option>
              <option value="'Source Sans 3', sans-serif">Source Sans 3</option>
              <option value="'Staatliches', system-ui">Staatliches</option>
              <option value="'Times New Roman', serif">Times New Roman</option>
            </select>
            <input class="font-size-input" type="number" min="8" value="10" aria-label="Description font size"/>
          </div>
          <div class="control-row">
            <button class="bold-toggle btn-icon" aria-label="Toggle bold" aria-pressed="false">B</button>
            <button class="italic-toggle btn-icon" aria-label="Toggle italic" aria-pressed="false">I</button>
            <input class="color-picker" type="color" value="#000000" aria-label="Description color"/>
          </div>
        </div>

        <div class="control-row checkbox-row">
          <input id="stretch-block-covers-toggle" type="checkbox"/>
          <label for="stretch-block-covers-toggle">Stretch Book Covers</label>
        </div>

        <hr class="separator">

        <div class="form-group" id="cover-header-text-group">
          <label>Cover Header Text</label>
          
          <div class="control-row checkbox-row">
            <input id="cover-advanced-toggle" type="checkbox"/>
            <label for="cover-advanced-toggle">Multi-line mode (customize each line)</label>
          </div>
          
          <!-- Simple mode: single textarea -->
          <div id="cover-simple-mode">
            <label for="cover-title-input" class="sr-only">Cover title text</label>
            <textarea id="cover-title-input" rows="3" placeholder="Enter Cover Title..."></textarea>
          </div>
          
          <!-- Advanced mode: 3 line inputs -->
          <div id="cover-advanced-mode">
            <input type="text" class="cover-line-input" id="cover-line-1" placeholder="Line 1" aria-label="Cover line 1 text"/>
            <input type="text" class="cover-line-input" id="cover-line-2" placeholder="Line 2" aria-label="Cover line 2 text"/>
            <input type="text" class="cover-line-input" id="cover-line-3" placeholder="Line 3" aria-label="Cover line 3 text"/>
          </div>
          
          <button id="generate-cover-button" class="btn btn-primary" style="margin-top: 10px; width: 100%;">Auto-Generate Cover</button>
        </div>

        <div class="form-group" id="cover-title-style-group">
          <label>Cover Header Style</label>
          
          <!-- Simple mode styling (shared for all text) -->
          <div id="cover-simple-style">
            <div class="control-row">
              <select class="font-select" id="cover-font-select" aria-label="Cover title font family">
                <option value="'Anton', sans-serif">Anton</option>
                <option value="'Arvo', serif">Arvo</option>
                <option value="'Bangers', system-ui">Bangers</option>
                <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
                <option value="'Bungee', system-ui">Bungee</option>
                <option value="'Calibri', sans-serif">Calibri</option>
                <option value="'Cinzel', serif">Cinzel</option>
                <option value="'Crimson Text', serif">Crimson Text</option>
                <option value="'EB Garamond', serif">EB Garamond</option>
                <option value="'Georgia', serif">Georgia</option>
                <option value="'Helvetica', sans-serif">Helvetica</option>
                <option value="'Lato', sans-serif">Lato</option>
                <option value="'Libre Baskerville', serif">Libre Baskerville</option>
                <option value="'Merriweather', serif">Merriweather</option>
                <option value="'Montserrat', sans-serif">Montserrat</option>
                <option value="'Open Sans', sans-serif">Open Sans</option>
                <option value="'Oswald', sans-serif" selected>Oswald</option>
                <option value="'Playfair Display', serif">Playfair Display</option>
                <option value="'Poppins', sans-serif">Poppins</option>
                <option value="'Raleway', sans-serif">Raleway</option>
                <option value="'Roboto', sans-serif">Roboto</option>
                <option value="'Roboto Slab', serif">Roboto Slab</option>
                <option value="'Source Sans 3', sans-serif">Source Sans 3</option>
                <option value="'Staatliches', system-ui">Staatliches</option>
                <option value="'Times New Roman', serif">Times New Roman</option>
              </select>
              <input class="font-size-input" id="cover-font-size" type="number" min="8" value="40" aria-label="Cover title font size"/>
            </div>
            <div class="control-row">
              <button class="bold-toggle active btn-icon" id="cover-bold-toggle" aria-label="Toggle bold" aria-pressed="true">B</button>
              <button class="italic-toggle btn-icon" id="cover-italic-toggle" aria-label="Toggle italic" aria-pressed="false">I</button>
              <input class="color-picker" id="cover-text-color" type="color" value="#FFFFFF" aria-label="Cover title text color"/>
            </div>
          </div>
          
          <!-- Advanced mode: per-line styling -->
          <div id="cover-advanced-style">
            <div class="line-style-group">
              <div class="line-style-label">Line 1</div>
              <div class="control-row">
                <select class="font-select line-font" id="line-1-font" aria-label="Line 1 font">
                  <option value="'Anton', sans-serif">Anton</option>
                  <option value="'Arvo', serif">Arvo</option>
                  <option value="'Bangers', system-ui">Bangers</option>
                  <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
                  <option value="'Bungee', system-ui">Bungee</option>
                  <option value="'Calibri', sans-serif">Calibri</option>
                  <option value="'Cinzel', serif">Cinzel</option>
                  <option value="'Crimson Text', serif">Crimson Text</option>
                  <option value="'EB Garamond', serif">EB Garamond</option>
                  <option value="'Georgia', serif">Georgia</option>
                  <option value="'Helvetica', sans-serif">Helvetica</option>
                  <option value="'Lato', sans-serif">Lato</option>
                  <option value="'Libre Baskerville', serif">Libre Baskerville</option>
                  <option value="'Merriweather', serif">Merriweather</option>
                  <option value="'Montserrat', sans-serif">Montserrat</option>
                  <option value="'Open Sans', sans-serif">Open Sans</option>
                  <option value="'Oswald', sans-serif" selected>Oswald</option>
                  <option value="'Playfair Display', serif">Playfair Display</option>
                  <option value="'Poppins', sans-serif">Poppins</option>
                  <option value="'Raleway', sans-serif">Raleway</option>
                  <option value="'Roboto', sans-serif">Roboto</option>
                  <option value="'Roboto Slab', serif">Roboto Slab</option>
                  <option value="'Source Sans 3', sans-serif">Source Sans 3</option>
                  <option value="'Staatliches', system-ui">Staatliches</option>
                  <option value="'Times New Roman', serif">Times New Roman</option>
                </select>
                <input class="font-size-input line-size" id="line-1-size" type="number" min="8" value="48" aria-label="Line 1 size"/>
              </div>
              <div class="control-row">
                <button class="bold-toggle active btn-icon line-bold" id="line-1-bold" aria-label="Line 1 bold">B</button>
                <button class="italic-toggle btn-icon line-italic" id="line-1-italic" aria-label="Line 1 italic">I</button>
                <input class="color-picker line-color" id="line-1-color" type="color" value="#FFFFFF" aria-label="Line 1 color"/>
              </div>
            </div>
            
            <div class="line-style-group">
              <div class="line-style-label">Line 2</div>
              <div class="control-row">
                <select class="font-select line-font" id="line-2-font" aria-label="Line 2 font">
                  <option value="'Anton', sans-serif">Anton</option>
                  <option value="'Arvo', serif">Arvo</option>
                  <option value="'Bangers', system-ui">Bangers</option>
                  <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
                  <option value="'Bungee', system-ui">Bungee</option>
                  <option value="'Calibri', sans-serif">Calibri</option>
                  <option value="'Cinzel', serif">Cinzel</option>
                  <option value="'Crimson Text', serif">Crimson Text</option>
                  <option value="'EB Garamond', serif">EB Garamond</option>
                  <option value="'Georgia', serif">Georgia</option>
                  <option value="'Helvetica', sans-serif">Helvetica</option>
                  <option value="'Lato', sans-serif">Lato</option>
                  <option value="'Libre Baskerville', serif">Libre Baskerville</option>
                  <option value="'Merriweather', serif">Merriweather</option>
                  <option value="'Montserrat', sans-serif">Montserrat</option>
                  <option value="'Open Sans', sans-serif">Open Sans</option>
                  <option value="'Oswald', sans-serif" selected>Oswald</option>
                  <option value="'Playfair Display', serif">Playfair Display</option>
                  <option value="'Poppins', sans-serif">Poppins</option>
                  <option value="'Raleway', sans-serif">Raleway</option>
                  <option value="'Roboto', sans-serif">Roboto</option>
                  <option value="'Roboto Slab', serif">Roboto Slab</option>
                  <option value="'Source Sans 3', sans-serif">Source Sans 3</option>
                  <option value="'Staatliches', system-ui">Staatliches</option>
                  <option value="'Times New Roman', serif">Times New Roman</option>
                </select>
                <input class="font-size-input line-size" id="line-2-size" type="number" min="8" value="28" aria-label="Line 2 size"/>
              </div>
              <div class="control-row">
                <button class="bold-toggle btn-icon line-bold" id="line-2-bold" aria-label="Line 2 bold">B</button>
                <button class="italic-toggle btn-icon line-italic" id="line-2-italic" aria-label="Line 2 italic">I</button>
                <input class="color-picker line-color" id="line-2-color" type="color" value="#FFFFFF" aria-label="Line 2 color"/>
                <input class="font-size-input line-spacing" id="line-2-spacing" type="number" min="0" max="50" value="10" title="Space above this line (pt)" aria-label="Line 2 spacing"/>
              </div>
            </div>
            
            <div class="line-style-group">
              <div class="line-style-label">Line 3</div>
              <div class="control-row">
                <select class="font-select line-font" id="line-3-font" aria-label="Line 3 font">
                  <option value="'Anton', sans-serif">Anton</option>
                  <option value="'Arvo', serif">Arvo</option>
                  <option value="'Bangers', system-ui">Bangers</option>
                  <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
                  <option value="'Bungee', system-ui">Bungee</option>
                  <option value="'Calibri', sans-serif">Calibri</option>
                  <option value="'Cinzel', serif">Cinzel</option>
                  <option value="'Crimson Text', serif">Crimson Text</option>
                  <option value="'EB Garamond', serif">EB Garamond</option>
                  <option value="'Georgia', serif">Georgia</option>
                  <option value="'Helvetica', sans-serif">Helvetica</option>
                  <option value="'Lato', sans-serif">Lato</option>
                  <option value="'Libre Baskerville', serif">Libre Baskerville</option>
                  <option value="'Merriweather', serif">Merriweather</option>
                  <option value="'Montserrat', sans-serif">Montserrat</option>
                  <option value="'Open Sans', sans-serif">Open Sans</option>
                  <option value="'Oswald', sans-serif" selected>Oswald</option>
                  <option value="'Playfair Display', serif">Playfair Display</option>
                  <option value="'Poppins', sans-serif">Poppins</option>
                  <option value="'Raleway', sans-serif">Raleway</option>
                  <option value="'Roboto', sans-serif">Roboto</option>
                  <option value="'Roboto Slab', serif">Roboto Slab</option>
                  <option value="'Source Sans 3', sans-serif">Source Sans 3</option>
                  <option value="'Staatliches', system-ui">Staatliches</option>
                  <option value="'Times New Roman', serif">Times New Roman</option>
                </select>
                <input class="font-size-input line-size" id="line-3-size" type="number" min="8" value="20" aria-label="Line 3 size"/>
              </div>
              <div class="control-row">
                <button class="bold-toggle btn-icon line-bold" id="line-3-bold" aria-label="Line 3 bold">B</button>
                <button class="italic-toggle btn-icon line-italic" id="line-3-italic" aria-label="Line 3 italic">I</button>
                <input class="color-picker line-color" id="line-3-color" type="color" value="#FFFFFF" aria-label="Line 3 color"/>
                <input class="font-size-input line-spacing" id="line-3-spacing" type="number" min="0" max="50" value="10" title="Space above this line (pt)" aria-label="Line 3 spacing"/>
              </div>
            </div>
          </div>
          
          <!-- Shared settings for both modes -->
          <div class="control-row" style="margin-top: 10px;">
            <div class="mini-label">Background:</div>
            <input id="cover-title-bg-color" class="color-picker" type="color" value="#000000" aria-label="Cover title background color"/>
          </div>
          
          <details class="advanced-settings">
            <summary>Margins & Padding</summary>
            <div class="grid-2">
              <label for="cover-title-outer-margin">Outer Margin</label>
              <input id="cover-title-outer-margin" class="font-size-input" type="number" value="10"/>
              <label for="cover-title-side-margin">Side Margin</label>
              <input id="cover-title-side-margin" class="font-size-input" type="number" value="0"/>
              <label for="cover-title-pad-x">BG Pad X</label>
              <input id="cover-title-pad-x" class="font-size-input" type="number" value="0"/>
              <label for="cover-title-pad-y">BG Pad Y</label>
              <input id="cover-title-pad-y" class="font-size-input" type="number" value="10"/>
            </div>
          </details>

          <div class="control-row checkbox-row">
            <input id="stretch-covers-toggle" type="checkbox" checked/>
            <label for="stretch-covers-toggle">Stretch Header Covers</label>
          </div>
          
          <div class="layout-settings" id="collage-layout-details" style="margin-top: 10px;">
            <label style="font-weight: 600; font-size: 0.85rem;">Collage Layout Options</label>
            <p style="font-size: 0.75rem; color: #666; margin: 6px 0;">Star 12 books to include in the collage</p>
            <div id="collage-layout-selector" aria-label="Select collage layout">
              <div class="layout-option selected" data-layout="classic" title="Classic: grid layout">
                <svg viewBox="0 0 40 50">
                  <rect x="2" y="0" width="10" height="12" rx="1"/>
                  <rect x="15" y="0" width="10" height="12" rx="1"/>
                  <rect x="28" y="0" width="10" height="12" rx="1"/>
                  <rect x="2" y="15" width="36" height="5" rx="1"/>
                  <rect x="2" y="23" width="10" height="8" rx="1"/>
                  <rect x="15" y="23" width="10" height="8" rx="1"/>
                  <rect x="28" y="23" width="10" height="8" rx="1"/>
                  <rect x="2" y="33" width="10" height="8" rx="1"/>
                  <rect x="15" y="33" width="10" height="8" rx="1"/>
                  <rect x="28" y="33" width="10" height="8" rx="1"/>
                  <rect x="2" y="43" width="10" height="7" rx="1"/>
                  <rect x="15" y="43" width="10" height="7" rx="1"/>
                  <rect x="28" y="43" width="10" height="7" rx="1"/>
                </svg>
                <span class="layout-option-label">Classic</span>
              </div>
              <div class="layout-option" data-layout="bookshelf" title="Bookshelf: with shelf lines">
                <svg viewBox="0 0 40 50">
                  <rect x="2" y="0" width="10" height="10" rx="1"/>
                  <rect x="15" y="0" width="10" height="10" rx="1"/>
                  <rect x="28" y="0" width="10" height="10" rx="1"/>
                  <rect x="0" y="10" width="40" height="2"/>
                  <rect x="2" y="15" width="36" height="4" rx="1"/>
                  <rect x="2" y="22" width="10" height="8" rx="1"/>
                  <rect x="15" y="22" width="10" height="8" rx="1"/>
                  <rect x="28" y="22" width="10" height="8" rx="1"/>
                  <rect x="0" y="30" width="40" height="2"/>
                  <rect x="2" y="34" width="10" height="6" rx="1"/>
                  <rect x="15" y="34" width="10" height="6" rx="1"/>
                  <rect x="28" y="34" width="10" height="6" rx="1"/>
                  <rect x="0" y="40" width="40" height="2"/>
                  <rect x="2" y="44" width="10" height="4" rx="1"/>
                  <rect x="15" y="44" width="10" height="4" rx="1"/>
                  <rect x="28" y="44" width="10" height="4" rx="1"/>
                  <rect x="0" y="48" width="40" height="2"/>
                </svg>
                <span class="layout-option-label">Bookshelf</span>
              </div>
              <div class="layout-option" data-layout="staggered" title="Staggered: brick pattern, fills edge-to-edge">
                <svg viewBox="0 0 40 50">
                  <!-- Row 1 (no offset) -->
                  <rect x="-3" y="0" width="8" height="11" rx="1"/>
                  <rect x="7" y="0" width="8" height="11" rx="1"/>
                  <rect x="17" y="0" width="8" height="11" rx="1"/>
                  <rect x="27" y="0" width="8" height="11" rx="1"/>
                  <rect x="37" y="0" width="8" height="11" rx="1"/>
                  <!-- Row 2 (offset right) -->
                  <rect x="2" y="12" width="8" height="11" rx="1"/>
                  <rect x="12" y="12" width="8" height="11" rx="1"/>
                  <rect x="22" y="12" width="8" height="11" rx="1"/>
                  <rect x="32" y="12" width="8" height="11" rx="1"/>
                  <!-- Title bar -->
                  <rect x="2" y="24" width="36" height="4" rx="1"/>
                  <!-- Row 3 (no offset) -->
                  <rect x="-3" y="29" width="8" height="11" rx="1"/>
                  <rect x="7" y="29" width="8" height="11" rx="1"/>
                  <rect x="17" y="29" width="8" height="11" rx="1"/>
                  <rect x="27" y="29" width="8" height="11" rx="1"/>
                  <rect x="37" y="29" width="8" height="11" rx="1"/>
                  <!-- Row 4 (offset right) -->
                  <rect x="2" y="41" width="8" height="9" rx="1"/>
                  <rect x="12" y="41" width="8" height="9" rx="1"/>
                  <rect x="22" y="41" width="8" height="9" rx="1"/>
                  <rect x="32" y="41" width="8" height="9" rx="1"/>
                </svg>
                <span class="layout-option-label">Staggered</span>
              </div>
              <div class="layout-option" data-layout="tilted" title="Tilted: rotated diagonal covers">
                <svg viewBox="0 0 40 50" style="overflow: hidden;">
                  <!-- Rotated grid with vertical column stagger, extends beyond edges -->
                  <g transform="rotate(-25 20 25)">
                    <!-- Row 0 (partial, above canvas) -->
                    <rect x="-11" y="-8" width="8" height="12" rx="1"/>
                    <rect x="0" y="-2" width="8" height="12" rx="1"/>
                    <rect x="11" y="-8" width="8" height="12" rx="1"/>
                    <rect x="22" y="-2" width="8" height="12" rx="1"/>
                    <rect x="33" y="-8" width="8" height="12" rx="1"/>
                    <rect x="44" y="-2" width="8" height="12" rx="1"/>
                    <!-- Row 1 -->
                    <rect x="-11" y="6" width="8" height="12" rx="1"/>
                    <rect x="0" y="12" width="8" height="12" rx="1"/>
                    <rect x="11" y="6" width="8" height="12" rx="1"/>
                    <rect x="22" y="12" width="8" height="12" rx="1"/>
                    <rect x="33" y="6" width="8" height="12" rx="1"/>
                    <rect x="44" y="12" width="8" height="12" rx="1"/>
                    <!-- Row 2 -->
                    <rect x="-11" y="20" width="8" height="12" rx="1"/>
                    <rect x="0" y="26" width="8" height="12" rx="1"/>
                    <rect x="11" y="20" width="8" height="12" rx="1"/>
                    <rect x="22" y="26" width="8" height="12" rx="1"/>
                    <rect x="33" y="20" width="8" height="12" rx="1"/>
                    <rect x="44" y="26" width="8" height="12" rx="1"/>
                    <!-- Row 3 -->
                    <rect x="-11" y="34" width="8" height="12" rx="1"/>
                    <rect x="0" y="40" width="8" height="12" rx="1"/>
                    <rect x="11" y="34" width="8" height="12" rx="1"/>
                    <rect x="22" y="40" width="8" height="12" rx="1"/>
                    <rect x="33" y="34" width="8" height="12" rx="1"/>
                    <rect x="44" y="40" width="8" height="12" rx="1"/>
                    <!-- Row 4 (partial, below canvas) -->
                    <rect x="-11" y="48" width="8" height="12" rx="1"/>
                    <rect x="0" y="54" width="8" height="12" rx="1"/>
                    <rect x="11" y="48" width="8" height="12" rx="1"/>
                    <rect x="22" y="54" width="8" height="12" rx="1"/>
                    <rect x="33" y="48" width="8" height="12" rx="1"/>
                    <rect x="44" y="54" width="8" height="12" rx="1"/>
                  </g>
                  <!-- Title bar (not rotated, on top with white margin) -->
                  <rect x="0" y="21" width="40" height="8" fill="white"/>
                  <rect x="2" y="23" width="36" height="4" rx="1"/>
                </svg>
                <span class="layout-option-label">Tilted</span>
              </div>
            </div>
            
            <div class="control-row" style="margin-top: 10px;">
              <label for="title-bar-position" class="mini-label" style="white-space: nowrap;">Title Bar Position:</label>
              <select id="title-bar-position" class="font-select" aria-label="Title bar position">
                <option value="top">Top</option>
                <option value="classic" selected>Classic</option>
                <option value="center">Center</option>
                <option value="lower">Lower</option>
                <option value="bottom">Bottom</option>
              </select>
            </div>
            
            <!-- Tilted-specific settings -->
            <div id="tilted-settings" style="display: none; margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 4px;">
              <div class="line-style-label" style="margin-bottom: 8px;">Tilted Layout Settings</div>
              <div class="control-row">
                <label for="tilt-degree" class="mini-label" style="white-space: nowrap;">Tilt Angle:</label>
                <input id="tilt-degree" class="font-size-input" type="number" min="-45" max="45" value="-20" aria-label="Tilt angle in degrees"/>
                <span class="mini-label">Â°</span>
              </div>
              <div class="control-row" style="margin-top: 6px;">
                <label for="tilt-offset-direction" class="mini-label" style="white-space: nowrap;">Offset Direction:</label>
                <select id="tilt-offset-direction" class="font-select" aria-label="Offset direction">
                  <option value="vertical" selected>Vertical</option>
                  <option value="horizontal">Horizontal</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Back Cover Elements</label>
          <div class="control-row checkbox-row">
            <input id="toggle-qr-code" type="checkbox" checked/>
            <label for="toggle-qr-code">Show QR Code</label>
          </div>
          <div class="control-row checkbox-row">
            <input id="toggle-branding" type="checkbox" checked/>
            <label for="toggle-branding">Show Branding</label>
          </div>
        </div>

        <div class="form-group" id="qr-code-controls">
          <label for="qr-url-input">QR Code URL</label>
          <div class="control-row">
              <input id="qr-url-input" type="text" placeholder="https://..."/>
              <button id="generate-qr-button" class="btn btn-sm btn-primary">Update</button>
          </div>
          
          <div class="form-group" data-style-group="qr" style="margin-top:15px;">
              <label>QR Text Style</label>
              <div class="control-row">
                  <select class="font-select" aria-label="QR text font family">
                    <option value="'Anton', sans-serif">Anton</option>
                    <option value="'Arvo', serif">Arvo</option>
                    <option value="'Bangers', system-ui">Bangers</option>
                    <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
                    <option value="'Bungee', system-ui">Bungee</option>
                    <option value="'Calibri', sans-serif" selected>Calibri</option>
                    <option value="'Cinzel', serif">Cinzel</option>
                    <option value="'Crimson Text', serif">Crimson Text</option>
                    <option value="'EB Garamond', serif">EB Garamond</option>
                    <option value="'Georgia', serif">Georgia</option>
                    <option value="'Helvetica', sans-serif">Helvetica</option>
                    <option value="'Lato', sans-serif">Lato</option>
                    <option value="'Libre Baskerville', serif">Libre Baskerville</option>
                    <option value="'Merriweather', serif">Merriweather</option>
                    <option value="'Montserrat', sans-serif">Montserrat</option>
                    <option value="'Open Sans', sans-serif">Open Sans</option>
                    <option value="'Oswald', sans-serif">Oswald</option>
                    <option value="'Playfair Display', serif">Playfair Display</option>
                    <option value="'Poppins', sans-serif">Poppins</option>
                    <option value="'Raleway', sans-serif">Raleway</option>
                    <option value="'Roboto', sans-serif">Roboto</option>
                    <option value="'Roboto Slab', serif">Roboto Slab</option>
                    <option value="'Source Sans 3', sans-serif">Source Sans 3</option>
                    <option value="'Staatliches', system-ui">Staatliches</option>
                    <option value="'Times New Roman', serif">Times New Roman</option>
                  </select>
                  <input class="font-size-input" type="number" min="8" value="13" aria-label="QR text font size"/>
              </div>
              <div class="control-row">
                  <button class="bold-toggle active btn-icon" aria-label="Toggle bold" aria-pressed="true">B</button>
                  <button class="italic-toggle btn-icon" aria-label="Toggle italic" aria-pressed="false">I</button>
                  <input class="color-picker" type="color" value="#000000" aria-label="QR text color"/>
              </div>
          </div>
        </div>

      </div>
    </aside>

    <main class="main-content" role="main">
      <div class="toolbar">
        <div class="toolbar-left">
          <label for="list-name-input" class="toolbar-label">List Name:</label>
          <input type="text" id="list-name-input" class="list-name-input" placeholder="My Booklist" aria-label="Name for this booklist"/>
        </div>
        <div class="toolbar-hint">
            <i class="fa-solid fa-circle-info" aria-hidden="true"></i> Find titles using the Search tab or edit text fields directly.
        </div>
      </div>

      <div id="preview-area" role="region" aria-label="Booklist preview">
        <div class="page" id="print-page-1">
          <div class="panel" id="back-cover-panel" role="list" aria-label="Back cover books">
            <div class="qr-code-container" id="qr-code-area">
              <div id="qr-code-text" class="editable-field" contenteditable="true" role="textbox" aria-label="QR code description text">Enter your blurb here. To link to an online list (like Bibliocommons), go to the Settings tab and paste the URL in the 'QR Code URL' field and click update. Remember to test the code with your phone!</div>
              <div id="qr-code-canvas" aria-label="QR code image">
                <img alt="QR Code Placeholder" src="https://placehold.co/144x144/EAEAEA/333333?text=QR+Code"/>
              </div>
            </div>
            <label class="custom-uploader" id="branding-uploader" role="button" aria-label="Upload library branding image">
              <img alt="Library Branding Placeholder" src="assets/img/branding-default.png"/>
              <input type="file" accept="image/*" aria-hidden="true"/>
            </label>
          </div>

          <div class="panel" id="front-cover-panel">
            <div class="custom-uploader" id="front-cover-uploader" role="button" aria-label="Upload or generate front cover image">
              <img alt="Cover Image Placeholder" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/>
              <div class="placeholder-text">
                Upload a Custom Cover<br/>For the best results, its dimensions should be 5x8 inches<br/><br/>OR<br/><br/>Use the Auto-Generate Cover tool<br/>in the Settings tab<br/>(Star 12 books to include in the collage)
              </div>
              <input type="file" accept="image/*" aria-hidden="true"/>
            </div>
          </div>
          <div class="page-divider" aria-hidden="true"></div>
        </div>

        <div class="page" id="print-page-2">
          <div class="panel book-panel" id="inside-left-panel" role="list" aria-label="Inside left panel books"></div>
          <div class="panel book-panel" id="inside-right-panel" role="list" aria-label="Inside right panel books"></div>
          <div class="page-divider" aria-hidden="true"></div>
        </div>
      </div>
    </main>
  </div>

  <script src="assets/js/app.js"></script>

  <!-- Font preloader: ensures Google Fonts are ready before canvas drawing -->
  <div class="font-preloader" aria-hidden="true">
    <!-- Anton -->
    <span style="font-family: 'Anton', sans-serif; font-weight: 400;">.</span>
    <!-- Arvo -->
    <span style="font-family: 'Arvo', serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Arvo', serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Arvo', serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Arvo', serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Bangers -->
    <span style="font-family: 'Bangers', system-ui; font-weight: 400;">.</span>
    <!-- Bebas Neue -->
    <span style="font-family: 'Bebas Neue', sans-serif; font-weight: 400;">.</span>
    <!-- Bungee (all-caps display) -->
    <span style="font-family: 'Bungee', system-ui; font-weight: 400;">.</span>
    <!-- Cinzel -->
    <span style="font-family: 'Cinzel', serif; font-weight: 400;">.</span>
    <span style="font-family: 'Cinzel', serif; font-weight: 700;">.</span>
    <!-- Crimson Text -->
    <span style="font-family: 'Crimson Text', serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Crimson Text', serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Crimson Text', serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Crimson Text', serif; font-weight: 700; font-style: italic;">.</span>
    <!-- EB Garamond -->
    <span style="font-family: 'EB Garamond', serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'EB Garamond', serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'EB Garamond', serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'EB Garamond', serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Lato -->
    <span style="font-family: 'Lato', sans-serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Lato', sans-serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Lato', sans-serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Lato', sans-serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Libre Baskerville -->
    <span style="font-family: 'Libre Baskerville', serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Libre Baskerville', serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Libre Baskerville', serif; font-weight: 700; font-style: normal;">.</span>
    <!-- Merriweather -->
    <span style="font-family: 'Merriweather', serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Merriweather', serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Merriweather', serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Merriweather', serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Montserrat -->
    <span style="font-family: 'Montserrat', sans-serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Montserrat', sans-serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Open Sans -->
    <span style="font-family: 'Open Sans', sans-serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Open Sans', sans-serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Open Sans', sans-serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Open Sans', sans-serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Oswald -->
    <span style="font-family: 'Oswald', sans-serif; font-weight: 400;">.</span>
    <span style="font-family: 'Oswald', sans-serif; font-weight: 700;">.</span>
    <!-- Playfair Display -->
    <span style="font-family: 'Playfair Display', serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Playfair Display', serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Playfair Display', serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Playfair Display', serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Poppins -->
    <span style="font-family: 'Poppins', sans-serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Poppins', sans-serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Poppins', sans-serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Poppins', sans-serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Raleway -->
    <span style="font-family: 'Raleway', sans-serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Raleway', sans-serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Raleway', sans-serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Raleway', sans-serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Roboto -->
    <span style="font-family: 'Roboto', sans-serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Roboto', sans-serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Roboto', sans-serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Roboto', sans-serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Roboto Slab (no italics available) -->
    <span style="font-family: 'Roboto Slab', serif; font-weight: 400;">.</span>
    <span style="font-family: 'Roboto Slab', serif; font-weight: 700;">.</span>
    <!-- Source Sans 3 -->
    <span style="font-family: 'Source Sans 3', sans-serif; font-weight: 400; font-style: normal;">.</span>
    <span style="font-family: 'Source Sans 3', sans-serif; font-weight: 400; font-style: italic;">.</span>
    <span style="font-family: 'Source Sans 3', sans-serif; font-weight: 700; font-style: normal;">.</span>
    <span style="font-family: 'Source Sans 3', sans-serif; font-weight: 700; font-style: italic;">.</span>
    <!-- Staatliches (all-caps display) -->
    <span style="font-family: 'Staatliches', system-ui; font-weight: 400;">.</span>
  </div>
  
</body>
</html>
